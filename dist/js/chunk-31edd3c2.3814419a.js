(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31edd3c2"],{"1da1":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("d3b7"),r("e6cf");function n(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void r(c)}s.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}}},3724:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"table"},[r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0,model:e.queryinfo}},[r("el-form-item",[e._v(" 角色名称： "),r("el-input",{staticStyle:{width:"200px",heght:"30px"},attrs:{placeholder:"请输入角色名称",size:"mini",clearable:""},model:{value:e.queryinfo.name,callback:function(t){e.$set(e.queryinfo,"name",t)},expression:"queryinfo.name"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){return e.getRoleList()}}},[e._v("搜索")])],1)],1)],1)],1),r("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",size:"mini",round:""},on:{click:e.handleAdd}},[e._v("新增")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:e.handleDeleteList}},[e._v("删除")]),[r("el-table",{ref:"multipleTable",staticClass:"el-tb-edit mgt20",attrs:{data:e.tableData,size:"mini","highlight-current-row":"",border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"describes",label:"描述"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"warning",plain:"",size:"small"},on:{click:function(r){return e.handleRole(t.$index,t.row)}}},[e._v("配置权限")])]}}])})],1),r("br"),r("el-pagination",{attrs:{"current-page":e.queryinfo.pagenum,"page-sizes":[10,20,50,100],"page-size":e.queryinfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalpage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]],2)]),r("el-dialog",{attrs:{title:"新增",width:"400px",visible:e.addFormVisible,"before-close":e.addCancel},on:{"update:visible":function(t){e.addFormVisible=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.addFormRules}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),r("br"),r("el-form-item",{attrs:{label:"描述",prop:"describes"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入描述"},model:{value:e.addForm.describes,callback:function(t){e.$set(e.addForm,"describes",t)},expression:"addForm.describes"}})],1),r("br")],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.addCancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addSubmit}},[e._v("提交")])],1)],1),r("el-dialog",{attrs:{title:"修改",width:"400px",visible:e.editFormVisible,"before-close":e.editCancel},on:{"update:visible":function(t){e.editFormVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),r("br"),r("el-form-item",{attrs:{label:"描述",prop:"describes"}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入角色名称"},model:{value:e.editForm.describes,callback:function(t){e.$set(e.editForm,"describes",t)},expression:"editForm.describes"}})],1),r("br")],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editCancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("提交")])],1)],1),r("el-dialog",{attrs:{title:"配置权限",width:"400px",visible:e.editRoleVisible,"before-close":e.editRoleCancel},on:{"update:visible":function(t){e.editRoleVisible=t}}},[r("el-tree",{ref:"tree",attrs:{data:e.treeMenusListAll,"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedTreeList,"expand-on-click-node":!1,"default-expand-all":"",props:e.defaultProps,"highlight-current":"","check-on-click-node":""}}),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.editRoleCancel}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.roleSubmit}},[e._v("提交")])],1)],1)],1)},i=[],o=(r("99af"),r("d81d"),r("96cf"),r("1da1")),a={data:function(){return{queryinfo:{name:"",pagenum:1,pagesize:10},totalpage:0,tableData:[],selectList:[],deleteListId:[],addFormVisible:!1,addForm:{name:"",describes:""},addFormRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:5,message:"角色名称在1-10个字符之间",trigger:"blur"}],describes:[{min:1,max:10,message:"描述在1-100个字符之间",trigger:"blur"}]},editFormVisible:!1,editForm:{},editFormRules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:1,max:5,message:"角色名称在1-10个字符之间",trigger:"blur"}],describes:[{min:1,max:10,message:"描述在1-100个字符之间",trigger:"blur"}]},editRoleVisible:!1,editRole:{},treeMenusListAll:[],defaultProps:{children:"subs",label:"title"},roleId:"",selectedTreeList:[]}},computed:{},mounted:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters.getRole("roles","get")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.get("roles",{params:e.queryinfo});case 4:if(r=t.sent,200===r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 7:e.tableData=r.data.datas,e.totalpage=r.data.totalpage,e.pagenum=r.data.pagenum;case 10:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryinfo.pagesize=e,this.queryinfo.pagenum=1,this.getRoleList()},handleCurrentChange:function(e){this.queryinfo.pagenum=e,this.getRoleList()},handleSelectionChange:function(e){this.deleteListId=e.map((function(e){return e.id}))},handleAdd:function(){this.$store.getters.getRole("roles","post")||(this.addFormVisible=!0)},addCancel:function(){this.addFormVisible=!1,this.$refs.addForm.resetFields()},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.$http.post("roles",e.addForm);case 4:if(n=t.sent,201===n.meta.status){t.next=8;break}return e.$message.error(n.meta.msg),t.abrupt("return");case 8:e.$message.success(n.meta.msg),e.$refs.addForm.resetFields(),e.addFormVisible=!1,e.addForm={},e.getRoleList();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleDeleteList:function(){var e=this;this.$store.getters.getRole("roles","delete")||(0!=this.deleteListId.length?this.$confirm("确认删除吗？","提示",{}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.delete("roles",{data:{ids:e.deleteListId}});case 2:if(r=t.sent,console.log(r),204===r.meta.status){t.next=7;break}return e.$message.error(r.meta.msg),t.abrupt("return");case 7:e.$message.success(r.meta.msg),e.getRoleList();case 9:case"end":return t.stop()}}),t)})))).catch((function(){})):this.$message.error("请选择要删除的数据"))},handleEdit:function(e,t){this.$store.getters.getRole("roles","put")||(this.editForm=JSON.parse(JSON.stringify(t)),this.editFormVisible=!0)},editCancel:function(){this.editFormVisible=!1,this.editSubmit={}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.$http.put("roles",e.editForm);case 4:if(n=t.sent,200===n.meta.status){t.next=8;break}return e.$message.error(n.meta.msg),t.abrupt("return");case 8:e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getRoleList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleRole:function(e,t){this.$store.getters.getRole("roles/{id}","post")||(this.roleId=t.id,this.editRoleVisible=!0,this.getTreeMenusListAll())},editRoleCancel:function(){this.editRoleVisible=!1},getTreeMenusListAll:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("menus/treeListAll/".concat(e.roleId));case 2:r=t.sent,console.log(r),200!==r.meta.status&&e.$message.error(r.meta.msg),e.treeMenusListAll=r.data.datas,e.selectedTreeList=r.data.selectedMenu;case 7:case"end":return t.stop()}}),t)})))()},roleSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$refs.tree.getCheckedKeys(),0!==r.length){t.next=4;break}return e.$message.error("请选择"),t.abrupt("return");case 4:return r=r.concat(e.$refs.tree.getHalfCheckedKeys()),t.next=7,e.$http.post("roles/".concat(e.roleId),{ids:r});case 7:if(n=t.sent,200===n.meta.status){t.next=11;break}return e.$message.error(n.meta.msg),t.abrupt("return");case 11:e.$message.success(n.meta.msg),e.editRoleVisible=!1,e.getRoleList();case 14:case"end":return t.stop()}}),t)})))()}}},s=a,l=r("2877"),c=Object(l["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},"96cf":function(e,t){!function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"===typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{u=t.regeneratorRuntime=c?e.exports:{},u.wrap=w;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",p={},g={};g[a]=function(){return this};var b=Object.getPrototypeOf,v=b&&b(b(j([])));v&&v!==n&&i.call(v,a)&&(g=v);var y=F.prototype=L.prototype=Object.create(g);k.prototype=y.constructor=F,F.constructor=k,F[l]=k.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,F):(e.__proto__=F,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(y),e},u.awrap=function(e){return{__await:e}},R($.prototype),$.prototype[s]=function(){return this},u.AsyncIterator=$,u.async=function(e,t,r,n){var i=new $(w(e,t,r,n));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},R(y),y[l]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){while(t.length){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),p}}}function w(e,t,r,n){var i=t&&t.prototype instanceof L?t:L,o=Object.create(i.prototype),a=new O(n||[]);return o._invoke=_(e,r,a),o}function x(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function L(){}function k(){}function F(){}function R(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function $(e){function t(r,n,o,a){var s=x(e[r],e,n);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"===typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){l.value=e,o(l)}),a)}a(s.arg)}var r;function n(e,n){function i(){return new Promise((function(r,i){t(e,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=n}function _(e,t,r){var n=d;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===m){if("throw"===i)throw o;return V()}r.method=i,r.arg=o;while(1){var a=r.delegate;if(a){var s=C(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var l=x(e,t,r);if("normal"===l.type){if(n=r.done?m:f,l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=m,r.method="throw",r.arg=l.arg)}}}function C(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=x(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){while(++n<e.length)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:V}}function V(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},d81d:function(e,t,r){"use strict";var n=r("23e7"),i=r("b727").map,o=r("1dde"),a=r("ae40"),s=o("map"),l=a("map");n({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-31edd3c2.3814419a.js.map