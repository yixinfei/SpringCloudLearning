(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d513298e","chunk-2d0e28d4"],{"77d2":function(e,t){e.exports="data:image/jpeg;base64,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"},"7ed4":function(e,t,s){"use strict";s.r(t);var r=s("2b0e"),a=new r["default"];t["default"]=a},b58a:function(e,t,s){},cff1:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[s("i",{staticClass:"el-icon-menu"})]),s("div",{staticClass:"logo"},[e._v("项目管理")]),s("div",{staticClass:"header-right"},[s("div",{staticClass:"header-user-con"},[s("div",{staticClass:"btn-fullscreen",on:{click:e.handleFullScreen}},[s("el-tooltip",{attrs:{effect:"dark",content:e.fullscreen?"取消全屏":"全屏",placement:"bottom"}},[s("i",{staticClass:"el-icon-rank"})])],1),s("div",{staticClass:"btn-bell"},[s("el-tooltip",{attrs:{effect:"dark",content:e.message?"有"+e.message+"条未读消息":"消息中心",placement:"bottom"}},[s("router-link",{attrs:{to:"/tabs"}},[s("i",{staticClass:"el-icon-bell"})])],1),e.message?s("span",{staticClass:"btn-bell-badge"}):e._e()],1),s("div",{staticClass:"user-avator"},[s("img",{attrs:{src:e.imgSrc}})]),s("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[e._v(" "+e._s(e.user.name)+" "),s("i",{staticClass:"el-icon-caret-bottom"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"changMySelf"}},[e._v("个人中心")]),s("el-dropdown-item",{attrs:{command:"changPassword"}},[e._v("修改密码")]),s("el-dropdown-item",{attrs:{divided:"",command:"loginout"}},[e._v("退出登录")])],1)],1)],1)]),s("el-dialog",{attrs:{title:"修改密码",width:"400px",visible:e.dialogFormVisibleEditPassword,"before-close":e.editPasswordCancel},on:{"update:visible":function(t){e.dialogFormVisibleEditPassword=t}}},[s("el-form",{ref:"formEdit",attrs:{model:e.formEdit,rules:e.passwordFormRules}},[s("el-form-item",{attrs:{label:"原始密码","label-width":e.formLabelWidth,prop:"oldPassword"}},[s("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off",placeholder:"请输入原始密码"},model:{value:e.formEdit.oldPassword,callback:function(t){e.$set(e.formEdit,"oldPassword",t)},expression:"formEdit.oldPassword"}})],1),s("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth,prop:"newPassword"}},[s("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off",placeholder:"请输入新密码"},model:{value:e.formEdit.newPassword,callback:function(t){e.$set(e.formEdit,"newPassword",t)},expression:"formEdit.newPassword"}})],1),s("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"newAgainPassword"}},[s("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off",placeholder:"请再次输入新密码"},model:{value:e.formEdit.newAgainPassword,callback:function(t){e.$set(e.formEdit,"newAgainPassword",t)},expression:"formEdit.newAgainPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.editPasswordCancel}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.editPassword}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"个人中心",width:"50%",visible:e.dialogFormVisibleMySelf,"before-close":e.editCancel},on:{"update:visible":function(t){e.dialogFormVisibleMySelf=t}}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:10}},[s("el-card",{attrs:{shadow:"always"}},[s("div",{staticStyle:{"text-align":"center"}},[s("el-upload",{staticClass:"img-btn",attrs:{"show-file-list":!1,"before-upload":e.beforeAvatarUpload,action:"#","http-request":e.uploadImg}},[e.progressFlag?e._e():s("el-avatar",{staticClass:"head-img",attrs:{size:100,src:e.imgSrc}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.progressFlag,expression:"progressFlag"}],staticClass:"head-img"},[s("el-progress",{attrs:{type:"circle",percentage:e.progressPercent}})],1)],1)],1),s("div",[s("h2",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.user.name))])]),s("div",[s("div",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.user.roleName))])]),s("div",{staticStyle:{"margin-top":"30px"}},[s("i",{staticClass:"el-icon-message-solid"}),s("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.user.email))])]),s("div",{staticStyle:{"margin-top":"10px"}},[s("i",{staticClass:"el-icon-phone"}),s("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.user.phone))])])])],1),s("el-col",{attrs:{span:14}},[s("el-card",{attrs:{shadow:"always"}},[s("el-form",{ref:"formUser",attrs:{model:e.formUser,rules:e.editFormRules}},[s("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请输入姓名"},model:{value:e.formUser.name,callback:function(t){e.$set(e.formUser,"name",t)},expression:"formUser.name"}})],1),s("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[s("el-radio-group",{model:{value:e.formUser.sex,callback:function(t){e.$set(e.formUser,"sex",t)},expression:"formUser.sex"}},[s("el-radio",{attrs:{label:"1"}},[e._v("男")]),s("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),s("el-form-item",{attrs:{label:"电话","label-width":e.formLabelWidth,prop:"phone"}},[s("el-input",{attrs:{clearable:"",type:"number",autocomplete:"off",placeholder:"请输入电话"},model:{value:e.formUser.phone,callback:function(t){e.$set(e.formUser,"phone",t)},expression:"formUser.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱","label-width":e.formLabelWidth,prop:"email"}},[s("el-input",{attrs:{clearable:"",autocomplete:"off",placeholder:"请输入邮箱"},model:{value:e.formUser.email,callback:function(t){e.$set(e.formUser,"email",t)},expression:"formUser.email"}})],1)],1),s("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editUser()}}},[e._v("更新基本信息")])],1)],1)],1)],1)],1)],1)},a=[],o=(s("96cf"),s("1da1")),l=s("7ed4"),i=s("9e7a"),n={data:function(){var e=this,t=function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.formEdit.newPassword?r(new Error("两次输入密码不一致!")):r()};return{tooltipPasswordDisabled:!1,formLabelWidth:"80px",formEdit:{oldPassword:"",newPassword:"",newAgainPassword:""},formEditEn:{oldPassword:"",newPassword:""},formUser:{},user:{},collapse:!1,fullscreen:!1,message:2,dialogFormVisibleEditPassword:!1,dialogFormVisibleMySelf:!1,imageUrl:"true",progressFlag:"",progressPercent:0,passwordFormRules:{newAgainPassword:[{validator:t,trigger:"blur"}],oldPassword:[{required:!0,message:"请输入原始密码",trigger:"blur"},{min:1,max:15,message:"密码在1-15个字符之间",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:1,max:15,message:"密码在1-15个字符之间",trigger:"blur"}]},editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:5,message:"姓名在1-5个字符之间",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],phone:[{pattern:/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/,message:"请输入正确的电话号码",trigger:"blur"}]}}},computed:{imgSrc:function(){var e=this.$store.getters.user.headPortrait?this.$http.defaults.baseURL+this.$store.getters.user.headPortrait:s("77d2");return e}},methods:{handleCommand:function(e){"loginout"==e?(sessionStorage.removeItem("token"),this.$router.push("/login")):"changPassword"==e?this.dialogFormVisibleEditPassword=!0:"changMySelf"==e&&(this.dialogFormVisibleMySelf=!0,this.formUser=JSON.parse(JSON.stringify(this.user)))},collapseChage:function(){this.collapse=!this.collapse,l["default"].$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen},editPasswordCancel:function(){this.dialogFormVisibleEditPassword=!1,this.$refs.formEdit.resetFields()},editPassword:function(){var e=this;this.$refs.formEdit.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",!1);case 2:return e.formEditEn.oldPassword=Object(i["a"])(e.formEdit.oldPassword),e.formEditEn.newPassword=Object(i["a"])(e.formEdit.newPassword),t.next=6,e.$http.put("users/password",e.formEditEn);case 6:if(r=t.sent,console.log(r),200===r.meta.status){t.next=11;break}return e.$message.error(r.meta.msg),t.abrupt("return");case 11:sessionStorage.setItem("token",r.data.token),e.$message.success(r.meta.msg),e.dialogFormVisibleEditPassword=!1,e.formEditEn={},e.$refs.formEdit.resetFields();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},uploadImg:function(e){var t=this;console.log(e),this.progressFlag=!0,this.$http({url:"/users/image",method:"post",data:{image:e.file,id:"id"},onUploadProgress:function(e){t.progressPercent=e.loaded/e.total*100}}).then((function(e){console.log(e),200===e.meta.status?(t.formUser.headPortrait=e.data.imageUrl,t.$store.commit("add_User",t.formUser),100===t.progressPercent&&(t.progressFlag=!1,t.progressPercent=0)):t.$message.error(e.meta.msg)})).then((function(e){console.log(e)}))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),t},editCancel:function(){this.$refs.formUser.resetFields(),this.dialogFormVisibleMySelf=!1},editUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.formUser.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.$http.put("users",e.formUser);case 4:r=t.sent,console.log("呵呵",r),200!=r.meta.status&&e.$message.error(r.meta.msg),e.$message.success(r.meta.msg),e.$store.commit("add_User",e.formUser),e.user=JSON.parse(JSON.stringify(e.formUser));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.user=this.$store.getters.user,this.formUser=JSON.parse(JSON.stringify(this.user)),document.body.clientWidth<1366&&this.collapseChage()}},d=n,A=(s("e249"),s("2877")),c=Object(A["a"])(d,r,a,!1,null,"69341e10",null);t["default"]=c.exports},e249:function(e,t,s){"use strict";var r=s("b58a"),a=s.n(r);a.a}}]);
//# sourceMappingURL=chunk-d513298e.6b05b7c6.js.map